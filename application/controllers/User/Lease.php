<?phpclass Lease extends User_Controller {    public function __construct() {        parent::__construct();        $this->load->helper('url_helper');        $this->load->library('pagination');    }    public function LeaseList() {        $data['instrument'] = $this->Develop_model->GetAllResult('instrument');        $data['area'] = $this->GetArea("lease", 0);        $this->prender('phone/lease/lease_list', $data, array('title' => '设备租赁'));    }    public function SelectLease() {        $area = $_POST['area'];        $instrument_id = $_POST['instrument_id'];        $min_price = $_POST['min_price'];        $max_price = $_POST['max_price'];        $pagesize = $_POST['pagesize'];        $pages = $_POST['pages'];        $offset = ($pages - 1) * $pagesize;        $data = $this->Rent_model->AllSelectLease($area, $instrument_id, $min_price, $max_price, $pagesize, $offset);        echo json_encode($data, JSON_UNESCAPED_UNICODE);    }    public function LeaseDetail() {        $id = $_GET['id'];        $data['detail'] = $this->Develop_model->GetRow('lease', array('id' => $id));        $this->prender('phone/lease/lease_detail', $data, array('title' => '设备租赁'));    }    public function SiteLeaseList() {        $data['area'] = $this->GetArea("lease", 0);        $data['name'] = isset($_GET['name']) ? $_GET['name'] : '';        $this->prender('phone/lease/site_lease_list', $data, array('title' => '场地租赁'));    }    public function SelectSiteLease() {        $area = $_POST['area'];        $type = $_POST['type'];        $min_price = $_POST['min_price'];        $max_price = $_POST['max_price'];        $name = $_POST['name'];        $data = $this->Rent_model->AllSelectSiteLease($area, $type, $min_price, $max_price, $name);        echo json_encode($data, JSON_UNESCAPED_UNICODE);    }    public function SiteLeaseDetail() {        $id = $_GET['id'];        $data['detail'] = $this->Develop_model->GetRow('site_lease', array('id' => $id));        $this->prender('phone/lease/site_lease_detail', $data, array('title' => '场地租赁'));    }    public function CollectLease() {        $id = $_POST['id'];        if (isset($_SESSION['lerenuser']['id'])) {            if (count($this->Develop_model->GetResult('collect', array('user_id' => $_SESSION['lerenuser']['id'], 'entity_id' => $id, 'entity_type' => 5))) == 0) {                $this->InsertCollect($_SESSION['lerenuser']['id'], $id, 5);            }            echo 1;        } else {            echo 2;        }    }    public function CollectSiteLease() {        $id = $_POST['id'];        if (isset($_SESSION['lerenuser']['id'])) {            if (count($this->Develop_model->GetResult('collect', array('user_id' => $_SESSION['lerenuser']['id'], 'entity_id' => $id, 'entity_type' => 6))) == 0) {                $this->InsertCollect($_SESSION['lerenuser']['id'], $id, 6);            }            echo 1;        } else {            echo 2;        }    }}?>